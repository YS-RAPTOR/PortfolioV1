---
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";

export async function getStaticPaths() {
	const Projects = await getCollection("projects");
	return Projects.map((project) => ({
		params: {
			project: project.slug,
		},
		props: {
			project,
		},
	}));
}

interface Props {
	project: CollectionEntry<"projects">;
}

const { project } = Astro.props;
const { _, headings } = await project.render();

const Sections = headings.map((heading, index) => {
	const data = project.body.split(heading.text);

	return {
		heading: heading.text,
		content: data[1].split("#")[0].trim(),
	};
});
---
