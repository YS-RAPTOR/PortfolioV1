---
const tabs = ["HOME", "ABOUT", "MY PORTFOLIO", "CONTACTS"];
const references = tabs.map(
    (tab) => `#${tab.toLowerCase().replaceAll(" ", "-")}`
);
---

<div class="top-0 flex justify-end full sticky z-10 bar:block">
    <div
        class="rounded-xl mx-5 mt-5 -mb-16 flex items-center backdrop-blur-md max-w-fit bar:justify-between bar:min-w-full bar:rounded-none bar:m-0"
    >
        <!-- BAR -->
        <div
            class="bg-slate-50 w-12 h-12 my-3 mx-8 justify-center items-center hidden bar:flex"
        >
            LOGO
        </div>
        <nav class="space-x-10 justify-around my-3 mx-8 hidden bar:flex">
            {
                tabs.map((tab, index) => (
                    <a
                        class="text-slate-50 my-3 text-base font-bold underline underline-offset-4 duration-300 ease-in-out decoration-lime-300 hover:text-lime-300"
                        href={references[index]}
                    >
                        {tab}
                    </a>
                ))
            }
            <a
                href="/resume"
                class="border-2 border-lime-300 rounded-md px-5 py-2 my-1 text-base font-bold text-lime-300 duration-300 ease-in-out hover:bg-Primary"
            >
                RESUME
            </a>
        </nav>

        <!-- HAMBURGER -->
        <a
            class="cursor-pointer border-slate-50 border-2 rounded-xl w-16 h-16 items-center justify-center flex bar:hidden relative"
            id="hamburger"
        >
            <div
                class="flex flex-col h-1/2 w-1/2 justify-around transition-transform duration-300"
                id="hamburger-icon"
            >
                <span class="w-auto h-1 bg-slate-50 transition-all duration-200"
                ></span>
                <span class="w-auto h-1 bg-slate-50 transition- duration-200"
                ></span>
                <span class="w-auto h-1 bg-slate-50 transition-all duration-200"
                ></span>
            </div>
        </a>
    </div>
    <div class="hidden h-1 w-auto bar:flex">
        <div class="bg-slate-50 w-full h-1/6 mx-5"></div>
    </div>
</div>

<script>
    let isOpen: boolean = false;
    const main = () => {
        const hamburger = document.getElementById("hamburger");
        const hamburgerIcon = document.getElementById("hamburger-icon");

        if (hamburger == null || hamburgerIcon == null) return;

        const top = hamburgerIcon.children[0];
        const mid = hamburgerIcon.children[1];
        const bot = hamburgerIcon.children[2];

        const click = () => {
            if (!isOpen) {
                top.classList.toggle("translate-y-[7.5px]");
                mid.classList.toggle("scale-0");
                bot.classList.toggle("-translate-y-[7.5px]");

                setTimeout(() => {
                    top.classList.toggle("rotate-45");
                    bot.classList.toggle("-rotate-45");
                    mid.classList.toggle("hidden");
                }, 200);

                isOpen = true;
            } else {
                top.classList.toggle("rotate-45");
                bot.classList.toggle("-rotate-45");
                mid.classList.toggle("hidden");

                setTimeout(() => {
                    top.classList.toggle("translate-y-[7.5px]");
                    mid.classList.toggle("scale-0");
                    bot.classList.toggle("-translate-y-[7.5px]");
                }, 200);
                isOpen = false;
            }
        };

        hamburger.addEventListener("click", (event) => {
            click();
        });

        addEventListener("resize", (event) => {
            if (window.innerWidth >= 850) {
                if (isOpen) click();
            }
        });
    };

    main();
</script>
